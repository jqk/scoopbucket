{
    "version": "0.5.1",
    "description": "An AI-powered IDE Chinese local version that makes programming more enjoyable and efficient.",
    "homepage": "https://www.trae.com.cn",
    "license": "Freeware",
    "architecture": {
        "64bit": {
            "url": "https://lf-cdn.trae.com.cn/obj/trae-com-cn/pkg/app/releases/stable/1.0.11999/win32/Trae%20CN-Setup-x64.exe",
            "hash": "87ee070b5e2d99afa5cb370f63c762d12424f962931b82c0bd85dde02c3c89fc",
            "extract_dir": "{code_GetDestDir}"
        }
    },
    "innosetup": true,
    "post_install": [
        "if (!(Test-Path \"$dir\\data\\extensions\") -and (Test-Path \"$env:USERPROFILE\\.trae-cn\\extensions\")) {",
        "    info '[Portable Mode] Copying extensions...'",
        "    Copy-Item \"$env:USERPROFILE\\.trae-cn\\extensions\" \"$dir\\data\" -Recurse",
        "}",
        "if (!(Test-Path \"$dir\\data\\user-data\") -and (Test-Path \"$env:AppData\\Trae CN\")) {",
        "    info '[Portable Mode] Copying user data...'",
        "    Copy-Item \"$env:AppData\\Trae CN\" \"$dir\\data\\user-data\" -Recurse",
        "}",
        "$extensions_file = \"$dir\\data\\extensions\\extensions.json\"",
        "if ((Test-Path \"$extensions_file\")) {",
        "    info 'Adjusting path in extensions file...'",
        "    (Get-Content \"$extensions_file\") -replace '(?<=trae-cn(/|\\\\\\\\)).*?(?=(/|\\\\\\\\)data(/|\\\\\\\\)extensions)', $version | Set-Content \"$extensions_file\"",
        "}"
    ],
    "bin": "bin/trae.cmd",
    "shortcuts": [
        [
            "Trae CN.exe",
            "Trae-CN",
            "--user-data-dir=\"$dir\\data\\user-data\" --extensions-dir=\"$dir\\data\\extensions\""
        ]
    ],
    "persist": "data",
    "checkver": {
        "url": "https://docs.trae.com.cn/changelog/changelog?_lang=zh",
        "regex": "Trae(?: CN)? v([\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://lf-cdn.trae.com.cn/obj/trae-com-cn/pkg/app/releases/stable/1.0.11999/win32/Trae%20CN-Setup-x64.exe"
            }
        }
    },
    "notes": [
        "English version is named 'Trae' (www.trae.ai) but not Trae-CN (www.trae.com.cn).",
        "Version number in the filename is not always same as what we can get from autopudate.",
        "For example, 1.2 is listed in changelog, but in the filename is 1.0.8484.",
        "As the same time, the global version is 1.0.8482 recorded on https://api.trae.ai/icube/api/v1/native/version/trae/latest."
    ]
}
